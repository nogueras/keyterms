/*  * NOTICE  *  */
#!/usr/bin/env node

var mongoose = require('mongoose');
var Promise = require('bluebird');
var readline = require('readline');

var rl = readline.createInterface({
	input: process.stdin,
	output: process.stdout
});

var prompt = function (_prompt) {
	return new Promise( function (resolve, reject) {
		rl.question(_prompt, resolve);
	});
};

var exit = function () {
	rl.close();
	mongoose.disconnect();
};

var db = require('../../db').init({performCheck: false})
.then( function () {

	var gloss = {
		isAdmin: true
	};

	console.log('Welcome to the Glossary cli: ');

	return prompt('Enter the Glossary\'s name: ')
	.then( function (ans) {
		gloss.name = ans;

		return prompt('Enter the Glossary\'s abbreviation: ')
	})
	.then( function (ans) {
		gloss.abbreviation = ans;

		return prompt('Enter the Glossary\'s description: ')
	})
	.then( function (ans) {
		gloss.description = ans;

		return true;
	})
	.then( function () {
		return gloss;
	})
})
.then( function (gloss) {
	return mongoose.model('Glossary').create(gloss);
})
.then( function (gloss) {
	console.log(`Glossary: ${gloss.name} was created`);
	exit();
});
